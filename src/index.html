<!DOCTYPE html>
<html>
<head>
	<title>The Bishop and the Knight</title>
	<link rel="stylesheet" type="text/css" href="index.css">
	<script type="text/javascript" src="chess-pieces.js"></script>
	<script type="text/javascript" src="bishop-and-knight.js"></script>
</head>
<body>
<div id="main"></div>
<div id="alertOverlay"></div>
<script type="text/javascript">
	function setupLevel1() {
		const BOARD_TERRAIN_AS_NUMBERS = [
		[0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,],
		];
		const BOARD_TERRAIN = BOARD_TERRAIN_AS_NUMBERS.map((row) => {
			return row.map((cell) => {
				if(cell === 0)
					return TerrainTypes.Empty;
				else if(cell === 1)
					return TerrainTypes.Impassable;
				else if(cell === 2)
					return TerrainTypes.Goal;
				else
					console.error('Terrain Type not recognized when generating level1');
			});
		});
		const BOARDSIZE_ROWS = BOARD_TERRAIN_AS_NUMBERS.length;
		const BOARDSIZE_COLUMNS = BOARD_TERRAIN_AS_NUMBERS[0].length;

		alertOverlay = new AlertOverlay(document.getElementById('alertOverlay'), alertOverlayClickHandler);
		alertOverlay.show('Player Phase â–¶');


		mainBoard = new Board(BOARDSIZE_ROWS, BOARDSIZE_COLUMNS, BOARD_TERRAIN, 'maintable', tileClickHandler,
			function() {
				alertOverlay.setClickHandler(null);
				alertOverlay.show('You Lose!');
			},
			function() {
				alertOverlay.setClickHandler(null);
				alertOverlay.show('You Win!');
			});
		mainBoard.addDomToParent('main');

		var newPiece;
		newPiece = new Piece('img/Marcius.png', Alignment.Player, MovementTypes.Bishop, null, null);
		mainBoard.addPiece(newPiece, 3, 4);
		newPiece = new Piece('img/Latisha.png', Alignment.Player, MovementTypes.Knight, null, WeaponType.Physical);
		mainBoard.addPiece(newPiece, 6, 4);

		newPiece = new Piece('img/EnemyRobotRook_Physical.png', Alignment.Enemy, MovementTypes.Rook, WeaponType.Physical, null);
		mainBoard.addPiece(newPiece, 3, 8);
		newPiece = new Piece('img/EnemyRobotRook_Physical.png', Alignment.Enemy, MovementTypes.Rook, WeaponType.Physical, null);
		mainBoard.addPiece(newPiece, 5, 20);
		newPiece = new Piece('img/EnemyRobotRook_Physical.png', Alignment.Enemy, MovementTypes.Rook, WeaponType.Physical, null);
		mainBoard.addPiece(newPiece, 5, 21);
		newPiece = new Piece('img/EnemyRobotRook_Physical.png', Alignment.Enemy, MovementTypes.Rook, WeaponType.Physical, null);
		mainBoard.addPiece(newPiece, 5, 22);
		newPiece = new Piece('img/EnemyRobotRook_Physical.png', Alignment.Enemy, MovementTypes.Rook, WeaponType.Physical, null);
		mainBoard.addPiece(newPiece, 5, 23);

		mainBoard.updateDomToMatchState();
	}

	setupLevel1();
</script>
</body>
</html>